<!--suppress JSAnnotator -->
<template>
    <!-- Page, data-name contains page name which can be used in callbacks -->
    <div class="page " > <!-- page-with-subnavbar -->
        <!-- Top Navbar -->
        <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon icon-back"></i>
                    </a>
                </div>
                <div class="title sliding">{{@global.LANGUAGE.QR_CODE_MSG00}}</div>
                <div class="right">

                </div>
            </div>
        </div>


        <div  class="page-content" >
         <!--   <div class="block-title">{{@global.LANGUAGE.DEVICE_SHARE_MSG00}}</div>-->
            <div class="block">
                <p>{{@global.LANGUAGE.PROMPT_MSG065}}</p>
                <p>{{@global.LANGUAGE.PROMPT_MSG066}}: <span class="{{Covid19StatusColor}}">{{Covid19Status}}</span></p>
                <!--{{#if Covid19StatusDate}}
                <p>{{@global.LANGUAGE.INFORM_ABOUT_MSG03}}: {{Covid19StatusDate}}{{#if Covid19StatusDateCount}}({{Covid19StatusDateCount}}){{/if}}</p>
                {{/if}}-->
            </div>
            <div class="block block-qr" id="qr-wrapper">
                {{#unless DataLoaded}}
                <div key="skeleton-qr-block" class="skeleton-text skeleton-effect-blink"><div class="skeleton-block margin-auto" style="width: 264px; height: 264px;"></div></div>
                {{/unless}}
            </div>
            {{#js_if "this.Covid19StatusType >= 1"}}
            <div class="list">
                <ul>
                    <li class="item-content ">
                        <div class="item-media text-color-lightgray"><i class="f7-icons icon-day-of-week"></i></div>
                        <div class="item-inner">
                            <div class="item-title">
                                <div class="item-header text-color-gray">{{@global.LANGUAGE.INFORM_ABOUT_MSG03}}</div>
                                {{Covid19StatusDate}}{{#if Covid19StatusDateCount}}{{/if}}
                            </div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-media text-color-lightgray"><!--<i class="f7-icons icon-labname"></i>--></div>
                        <div class="item-inner">
                            <div class="item-title">
                                <div class="item-header text-color-gray">{{@global.LANGUAGE.UNIT_TEST_RESULT_MSG007}}</div>
                                {{Covid19TestType}}
                            </div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-media text-color-lightgray"><i class="f7-icons icon-labname"></i></div>
                        <div class="item-inner">
                            <div class="item-title">
                                <div class="item-header text-color-gray">{{@global.LANGUAGE.INFORM_ABOUT_MSG01}}</div>
                                {{OrganizeInfo.name}}
                            </div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-media text-color-lightgray"><i class="f7-icons icon-name"></i></div>
                        <div class="item-inner">
                            <div class="item-title">
                                <div class="item-header text-color-gray">{{@global.LANGUAGE.INFORM_ABOUT_MSG04}}</div>
                                {{DoctorInfo.firstName}}
                            </div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-media text-color-lightgray"><!--<i class="f7-icons icon-name"></i>--></div>
                        <div class="item-inner">
                            <div class="item-title">
                                <div class="item-header text-color-gray">{{@global.LANGUAGE.INFORM_ABOUT_MSG05}}</div>
                                {{DoctorInfo.subName}}
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            {{/js_if}}
        </div>

    </div>



</template>


<script>
    // script must return component object
    return {
        data: function () {
            let self = this;
            let userInfo = self.$app.methods.getFromStorage('userInfo');

            let diagnoseInfoDescr = Helper.Methods.getDiagnoseInfoDescr(userInfo.diagnoseInfo);


            let ret = {
                Covid19Status: diagnoseInfoDescr.text,
                Covid19StatusType: diagnoseInfoDescr.type,
                Covid19StatusColor: diagnoseInfoDescr.textColor,
                Covid19StatusDate: diagnoseInfoDescr.beginTime,
                Covid19StatusDateCount: diagnoseInfoDescr.beginTimeDaysCount,
                Covid19TestType: diagnoseInfoDescr.diagnoseTypeText,
                DoctorInfo: userInfo.doctorInfo ? userInfo.doctorInfo : {},
                OrganizeInfo: userInfo.organizeInfo ? userInfo.organizeInfo : {},
           };

            return ret;
        },

        methods: {


        },

        on: {
            pageInit: function (e, page) {
                let self = this;
                self.$app.progressbar.show('gray');
                setTimeout(function () {
                    self.$setState({
                        DataLoaded: true,
                    },()=>{
                        self.QRCode = new QRCode(document.getElementById("qr-wrapper"), {
                            text: "https://vici.quiktrak.co/",
                            /*logo: self.$app.data.logoSquare,
							logoWidth: 90,
							logoHeight: undefined,
							logoBackgroundColor: '#ffffff',
							logoBackgroundTransparent: false*/

                        });
                    });
                    self.$app.progressbar.hide();
                }, 2000);


            },
            pageBeforeRemove: function () {
                let self = this;


            }

        }
    };
</script>
